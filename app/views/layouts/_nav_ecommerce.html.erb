<div data-controller="menu-mobile search">
  <header class="flex justify-between items-center p-4 bg-white shadow" role="banner">
    <div class="flex items-center space-x-4">
      <h1 class="text-xl font-bold bg-gradient-to-r from-lime-500 to-orange-500 bg-clip-text text-transparent">
        Benefit Buy
      </h1>
    </div>

    <nav aria-label="Primary" class="hidden md:flex space-x-6">
      <%= navigation_links %>
    </nav>

    <div class="flex items-center space-x-4" aria-label="User Options">
      <%= inline_svg_tag('search', class: 'w-6 h-6 cursor-pointer text-gray-600 hover:text-lime-500', title: I18n.t('search'), aria: { label: 'Search' }, data: {action: 'click->search#openSearch'}) %>
      <%= inline_svg_tag('cart', class: 'w-6 h-6 cursor-pointer text-gray-600 hover:text-orange-500', title: I18n.t('shopping_cart'), aria: { label: 'Shopping Cart' }) %>
      <%= inline_svg_tag('avatar', class: 'w-6 h-6 cursor-pointer text-gray-600 hover:text-lime-500', title: I18n.t('user_profile'), aria: { label: 'User Profile' }) %>
      <%= inline_svg_tag('menu', class: 'w-6 h-6 cursor-pointer text-gray-600 md:hidden', title: I18n.t('menu'), aria: { label: 'Menu' }, data: { action: 'click->menu-mobile#toggle' }) %>
    
      <div class="relative">
        <%= form_with url: nil, method: :get, local: true do |form| %>
          <%= select_tag 'locale', options_for_select([ ['English', 'en'], 
            ['PortuguÃªs', 'pt']], I18n.locale), class: 'border-gray-300 rounded-md focus:outline-none focus:border-lime-500 locale-selector', onchange: "this.form.requestSubmit()" %>
        <% end %>
      </div>
    </div>
  </header>

  <nav data-menu-mobile-target="menu" id="mobile-menu" class="hidden md:hidden p-4 bg-white shadow-md absolute inset-x-0 top-[4rem] z-40">
    <%= navigation_links %>
  </nav>

  <div data-search-target="search" class="hidden absolute inset-x-0 top-[4rem] z-50 bg-white shadow-md p-4">
    <%= form_with url: nil, method: :get, local: true, class: "relative" do |form| %>
      <div class="relative">
        <%= form.text_field :query, placeholder: I18n.t('search_placeholder'), class: 'w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:border-lime-500' %>
        <button type="submit" class="absolute inset-y-0 right-0 px-4 py-2 bg-lime-500 text-white rounded-r-md hover:bg-lime-600">
          <%= inline_svg_tag('search', class: 'w-4 h-4') %>
        </button>
      </div>
    <% end %>
  </div>
</div>
